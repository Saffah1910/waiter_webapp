<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        

        header {
            background-color: #f0f0f0;
            padding: 10px;
            text-align: center;
        }

        h1 {
            margin: 0;
        }

        .days-container {
            display: flex;
            text-align: center;
        }

        .day {
            flex: 1;
            border: 2px solid black;
            padding: 10px;
            margin: 0 10px;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            margin-bottom: 10px;
        }

        .red {
            background-color: #f38375;
            border: #780116 3px solid;
        }

        .orange {
            background-color: #ffbf69;
            border: #f3722c 3px solid;
        }

        .clear-button {
            margin-top: 30px;
            margin-left: auto;
            margin-right: auto;
            display: block;
        }

        .green {
            background-color: #c1ff9b;
            border: #04471c 3px solid;
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            z-index: 1000;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        @media screen and (max-width: 1000px) {
            body {
                margin: 0;
            }

            .day {
                flex: 100%;
                margin: 0 0 20px 0;
            }

            .days-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Welcome to the Admin Dashboard</h1>
    </header>
    <br>

    <h1 style="text-align: center;">Manage Waiters</h1>
    <br>


    <form action="/days" method="get">
        {{#if clearData}}
        <p class="greenMessage">{{ clearData }}</p>
        {{/if}}

       <div class="days-container">
    {{#each availability}}
    <div class="day {{ @key }} {{#if this.stats}}{{this.stats}} {{/if}}">

        <h2>{{@key}}</h2>
        {{#if this.x.length}}
        <ul>
            {{#each this.x}}
            <li>
                <span>{{this}}</span>
                <button style="border: 2px solid black; background-color:#adb5bd" onclick="return confirm('Do you want to remove {{this}}')">x</button>
            </li>
            {{/each}}
        </ul>
        {{else}}
        <p style="color: #adb5bd;">No waiters available</p>
        {{/if}}
        {{!-- <a href="#" class="button-like" onclick="openPopup('{{@key}}', {{json this.x}})">See Details</a> --}}

    </div>
    {{/each}}
</div>

        <script>
            setTimeout(function () {
                document.querySelector(".greenMessage").style.display = "none";
            }, 4000);
        </script>


        {{!-- code for the popup of each dat --}}
        <div class="overlay" id="overlay"></div>
        <div class="popup" id="popup">
            <span onclick="closePopup()" style="cursor: pointer;">&times;</span>
            <h2 id="popupTitle"></h2>
            <div style="display: flex;">
                <ul id="popupContent"></ul>  <span style="cursor: pointer;">X</span>
            </div>
        </div>

       <script>
          //  handlebars.registerHelper('json', function (context) {
            //    return JSON.stringify(context);
           // });

            // Now, you can use the `json` helper in your Handlebars templates
          //  const template = handlebars.compile('{{json data}}');
            //const result = template({ data: { key: 'value' } });
           // console.log(result);

           // function openPopup(day, waiters) {
                // Set popup content based on the clicked day
             //   document.getElementById('popupTitle').innerText = `Details for ${day}`;
             //   const popupContent = document.getElementById('popupContent');
              //  popupContent.innerHTML = '';
              //  waiters.forEach(waiter => {
                  //  const li = document.createElement('li');
                   // li.innerText = waiter;
                  //  popupContent.appendChild(li);
             //   });

                // Show overlay and popup
             //   document.getElementById('overlay').style.display = 'block';
               // document.getElementById('popup').style.display = 'block';
            //}
        //    function closePopup() {
                // Hide overlay and popup
          //      document.getElementById('overlay').style.display = 'none';
            //    document.getElementById('popup').style.display = 'none';
            //}


        </script>
    </form>

    <form action="/clear" method="post">
        <button type="submit" class="clear-button"
            onclick="return confirm('Are you sure you want to clear this week\'s data?')">Clear week data</button>
    </form>
</body>

</html>